# Build optimizations for faster compile times

[build]
# Use all available CPU cores for parallel compilation
jobs = -1

# NOTE: Linker settings commented out - uncomment if you have lld/mold installed locally
# These provide ~2-3x faster linking but require manual setup

# [target.x86_64-unknown-linux-gnu]
# # Use lld linker on Linux (install: sudo apt install lld)
# linker = "clang"
# rustflags = ["-C", "link-arg=-fuse-ld=lld"]

# [target.x86_64-pc-windows-msvc]
# # Use lld linker on Windows (comes with Rust)
# rustflags = ["-C", "link-arg=/DEBUG:NONE"]

[profile.dev]
# Faster debug builds - less optimization but faster compile
opt-level = 0
debug = true
# Split debug info for faster linking
split-debuginfo = "packed"

[profile.dev.package."*"]
# Optimize dependencies even in dev mode (they rarely change)
opt-level = 2

[profile.release]
# Maximum optimization for release builds
opt-level = 3
lto = "thin"           # Link-time optimization (thin is faster than fat)
codegen-units = 1      # Better optimization, slower compile
strip = true           # Strip symbols for smaller binary

[profile.release-fast]
# Fast release builds for testing (less optimized but quicker to build)
inherits = "release"
lto = false
codegen-units = 16
strip = false
